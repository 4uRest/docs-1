## finance.getReport: Отчет по категориям

> Пример запроса:

```php
<?php
$url = 'https://joinposter.com/api/finance.getReport'
 . '?token=687409:4164553abf6a031302898da7800b59fb';

$data = sendRequest($url);
```

> Пример ответа:

```json
{
  "response":{
    "periods":[
      {
        "title":"Oct 2017",
        "start":1508101200,
        "end":1509483599
      },
      {
        "title":"Nov 2017",
        "start":1509483600,
        "end":1510865999
      }
    ],
    "categories":{
      "7":{
        "category_id":"7",
        "name":"book_category_action_actualization",
        "parent_id":"0",
        "operations":"3",
        "action":"14",
        "level":"1",
        "left":"1",
        "right":"2",
        "delete":"0",
        "amounts": {
          "1":{
            "Nov 2017":200000
          }
        },
        "currency_symbol":"<i class=\"icon-rouble\"><\/i>"
      },
      "8":{
        "category_id":"8",
        "name":"book_category_action_banking_services",
        "parent_id":"0",
        "operations":"3",
        "action":"15",
        "level":"1",
        "left":"3",
        "right":"4",
        "delete":"0"
      }
    }
  }
}
```

Метод возвращает отчет по категориям

### HTTP запрос

`GET https://joinposter.com/api/finance.getReport`

### GET-параметры запроса finance.getReport

Параметр | Описание
-------- | --------
dateFrom | Опциональный параметр, дата начала выборки в формате `Ymd`, включительно. По умолчанию дата месяц назад.
dateTo | Опциональный параметр, дата конца выборки в формате `Ymd`, включительно. По умолчанию дата текущего дня.
account_id | Опциональный параметр, id счета по которому возвращать отчет. По умолчанию по всем.
period | Опциональный параметр, период выборки: 1 — годам, 2 — кварталам, 3 — месяцам, 4 — неделям, 5 — дням. По умолчанию 3 — по месяцам. 

### Параметры ответа finance.getReport

Параметр | Описание
-------- | --------
response | Объект ответа

Внутри параметра `response` лежит объект, внутри которого есть следующие параметры:

Параметр | Описание
-------- | --------
periods | Массив содержит периоды по которым разбит отчет  
categories | Объект свойства которого — id категории а занчение — объект отчета

Объекты массива `periods` имеют следующие свойства

Параметр | Описание
-------- | --------
title | Название периода: год, квартал, месяц, неделя, день
start | Дата начала в формате unixtimestamp
end | Дата конца перода в формате unixtimestamp

Каждое свойство объекта `categories` содержит следующие параметры  

Параметр | Описание
-------- | --------
category_id | id категории
name | Название категории
delete | Признак, удалена ли категория: 1 — удалена, 0 — нет
parent_id | id родительской категории
operations | Колличество транзакций проведенных в категории за выбранный период 
action | Тип категорий по действиям: 1 — переводы, 11 — кассовые смены, 12 — поставоки, 14 — актуализация, 0 — любой тип действия
left | Id категории слева (по Nested Set)
right | Id катергории справа (по Nested Set)
level | Уровень вложенности ветки дерева категорий (по Nested Set)
currency_symbol | Unicode символ валюты, для рубля, драма и маната приходит HTML который на терминале отобразиться как иконка валюты
amounts | Всего расходов и доходов, в категории. Содержит в себе набор объектов. В каждом объекте свойство — это название периода из `periods.title`, значение это сумма в копейках за данный период.  
