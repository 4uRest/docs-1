## incomingOrders.createReservation: Создание брони

> Пример запроса:

```php
<?php
$url = 'https://joinposter.com/api/incomingOrders.createReservation'
 . '?token=687409:4164553abf6a031302898da7800b59fb';

$reservation = [
    'spot_id'           => '1',
    'phone'             => '+380684112224',
    'table_id'          => '1',
    'guests_count'      => '1',
    'duration'          => '2000',
    'date_reservation'  => '2018-03-22 16:20:00'
];

$data = sendRequest($url, 'post', $reservation);

```

> Пример ответа:

```json
{
   "response":{
      "incoming_order_id":"4",
      "type":"2",
      "spot_id":"1",
      "status":0,
      "client_id":4985,
      "first_name":"Владимир",
      "last_name":"Иванов",
      "phone":"380684112224",
      "email":"example@gmail.com",
      "sex":"2",
      "birthday":"1996-08-26",
      "address":"",
      "guests_count":"1",
      "comment":"",
      "created_at":"2018-03-22 17:02:41",
      "updated_at":"2018-03-22 17:02:41",
      "transaction_id":null,
      "fiscal_spreading":"0",
      "fiscal_method":"",
      "promotion":null,
      "date_reservation":"2018-03-22 18:20:00",
      "duration":"2000"
   }
}
```

Метод создает бронь стола на указанное время и клиента

### HTTP POST запрос

`POST https://joinposter.com/api/incomingOrders.createReservation`

### POST-параметры запроса incomingOrders.createReservation

Параметр | Описание
-------- | --------
spot_id | Обязательный параметр, id заведения в которое придет онлайн-заказ
type | Тип заказа: 1 — онлайн-заказ, 2 — бронирование
table_id | Обязательный параметр, id столика который бронируют
guests_count | Количество гостей на которых бронируем столик
date_reservation | Обязательный параметр, дата начала брони в формате `Y-m-d H:i:s`
duration | Обязательный параметр, длительность брони в секундах. Должен быть не меньше 1800 секунд (пол часа).
client_id | Id клиента в Poster, по умолчанию не передаётся. Если id не указан, то Poster попробует найти клиента с таким же номером телефона и привяжет его к заказу. Если это новый клиент, то официант выберет для него группу и Poster создаст нового клиента. 
phone | Телефон клиента, по умолчанию не передаётся
first_name | Имя клиента, по умолчанию не передаётся
last_name | Фамилия клиента, по умолчанию не передаётся
email | Эл. почта, по умолчанию не передаётся
sex | Пол клиента: 0 — не указан, 1 — мужской, 2 — женский. По умолчанию не передаётся.
birthday | Дата рождения клиента, формат `Y-m-d`. По умолчанию не передаётся.
address | Адрес клиента, по умолчанию не передаётся
comment | Комментарий к брони, по умолчанию не передаётся

### Параметры ответа incomingOrders.createReservation

Параметр | Описание
-------- | --------
response | Объект ответа

Внутри параметра `response` лежит объект, внутри которого есть следующие параметры:

Параметр | Описание
-------- | --------
incoming_order_id | Id брони
type | Тип заказа: 1 — онлайн-заказ, 2 — бронирование. Для этого метода всегда равен 2.
spot_id | Id заведения
status | Статус брони: 0 — новый, 1 — принят, 7 — отменён
client_id | Id клиента
guests_count | Количество гостей на которых бронируем столик
first_name | Имя клиента
last_name | Фамилия клиента
phone | Телефон клиента
email | Эл. почта клиента
sex | Пол клиента: 0 — не указан, 1 — мужской, 2 — женский
birthday | Дата рождения клиента, формат `Y-m-d`
address | Адрес клиента
comment | Комментарий к онлайн-заказу
created_at | Дата создания онлайн-заказа
updated_at | Дата изменения статуса онлайн-заказа
date_reservation | Дата начала брони в формате `Y-m-d H:i:s`
duration | Длительность брони в секундах
